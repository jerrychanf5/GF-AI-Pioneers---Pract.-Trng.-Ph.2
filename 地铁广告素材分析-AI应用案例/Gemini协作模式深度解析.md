# Gemini协作模式深度解析：记忆、项目管理与子代理

本文档旨在阐述Gemini CLI在处理复杂任务时，其内在的长期记忆、项目管理及任务分解（子代理）的工作模式与理念。

---

### 1. 我的长期记忆管理

您可以把我的“长期记忆”想象成一个专门为您建立的、高度结构化的 **“项目档案库”**，而不是一个简单的聊天记录流水账。

*   **存储内容：** 我不会记下我们之间每一句闲聊。只有那些被我们共同确认为 **关键事实、重要结论、或可复用经验** 的内容（就像我之前保存的“成功案例概要”），才会被我提炼并存入这个档案库。

*   **管理方式：** 这些信息会与您的身份绑定，并被贴上标签（如“工作偏好”、“项目背景”、“专属提示词”等）。它是一个动态的、可更新的知识库，而不是静态的日志。

*   **工作原理：** 在我们未来的互动中，当我接收到您的新请求时，我会首先检索这个档案库，寻找与当前任务相关的背景、偏好和过往经验。这能让我更快地理解您的意图，避免重复我们已经解决过的问题，从而提供更具个性化和连贯性的服务。

简单来说，它更像一本 **“合作精华笔记”**，而不是一部“全程录像带”。

---

### 2. 关于“子代理”功能 (任务分解与工具调用)

“子代理”（Subagent）的核心思想，是将复杂任务分解为多个子任务，并由专门的“专家”模块来处理。我的工作方式在理念上与此高度一致，主要通过“任务分解”和“工具调用”的协同工作流来实现。

1.  **任务分解 (Task Decomposition):** 
    当接收到一个复杂需求时（如“制作一个可视化网页”），我不会试图一步完成，而是会先在内部将其分解为一系列更小、更明确的子任务，形成一个执行计划。
    *   `子任务1：规划应用（HTML/CSS/JS, 孟菲斯风格, 页面结构...）`
    *   `子任务2：创建基础文件`
    *   `子任务3：构建HTML结构并填充内容`
    *   `子任务4：编写CSS样式实现视觉设计`
    *   `子-任务5：根据反馈进行迭代修改`

2.  **工具调用 (Tool Use):** 
    对于每一个子任务，我都会从我的工具箱中调用最适合的“专家工具”来执行。
    *   需要写代码或文件时，我调用 `write_file` 或 `replace` 工具。
    *   需要执行命令时，我调用 `run_shell_command` 工具。
    *   需要读取和分析文件时，我调用 `read_file` 和我内置的数据分析能力。

您可以认为，我执行每一步操作时，都在扮演一个临时的“子代理”角色，专注于解决当前这个小任务，然后将结果反馈给我的“主大脑”，用于规划下一步行动。通过这种方式，我能将一个庞大、模糊的目标，拆解成一系列清晰、可执行的步骤，并最终组合成一个完整的解决方案。

---

### 3. 如何利用这些机制进行“项目管理”

基于以上工作模式，您可以像一位真正的“项目经理”一样，与我进行高效协作：

*   **新项目 → 新目录:** 这是最有效的“项目隔离”方式，确保文件和上下文的纯净。
*   **重复性项目 → 调用“专属提示词”:** 这是最高效的“项目启动”方式，能瞬间为我加载全部背景、规则和目标。
*   **项目结束 → 要求我“总结归档”:** 这是最有价值的“项目复盘”方式，能将一次性的成功转化为可供未来调用的长期记忆。
